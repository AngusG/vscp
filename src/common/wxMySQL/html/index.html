<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>wxMySQL: wxMySQL Overview</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.3 -->
<div class="qindex"><a class="qindexHL" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1><a class="el" href="classwx_my_s_q_l.html">wxMySQL</a> Overview </h1>
<p>
<h3 align="center">0.1.3 </h3><div align="center">
<img src="wxMySQL.png" alt="wxMySQL.png">
</div>
<p>
<a class="el" href="classwx_my_s_q_l.html">wxMySQL</a> is a library for accessing MySQL databases from wxWidgets applications<p>
Classes:<br>
 <a class="el" href="classwx_my_s_q_l_field.html">wxMySQLField</a><br>
 <a class="el" href="classwx_my_s_q_l_result.html">wxMySQLResult</a><br>
 <a class="el" href="classwx_my_s_q_l_recordset.html">wxMySQLRecordset</a><br>
 <a class="el" href="classwx_my_s_q_l.html">wxMySQL</a><br>
<p>
Header files:<br>
 <b>wxMySQL.h:</b> Mandatory when using <a class="el" href="classwx_my_s_q_l.html">wxMySQL</a>.<br>
<p>
<hr>
 <h3>Contents:</h3>
<p>
<a class="el" href="index.html#basics">Connecting to MySQL server</a><br>
 <a class="el" href="index.html#queries">Executing queries</a><br>
 <a class="el" href="index.html#enumdatabases">Enumerating database names</a><br>
 <a class="el" href="index.html#enumtables">Enumerating table names</a><br>
 <a class="el" href="index.html#createdatabase">Creating new database and new table</a><br>
 <a class="el" href="index.html#fieldinfo">Retrieving information about table fields</a><br>
 <a class="el" href="index.html#license">License</a><br>
 <a class="el" href="index.html#developers">Developers</a><br>
 <a class="el" href="index.html#links">wxMySQL homepage and other links</a><br>
 <hr>
<h2><a class="anchor" name="basics">
Connecting to MySQL server</a></h2>
<div class="fragment"><pre class="fragment">...
wxMySQL mysql;
...
wxString mess = <span class="stringliteral">"\r\nConnecting... "</span>;
<span class="keywordflow">if</span>(mysql.Connect(<span class="stringliteral">"some_host_name"</span>, 3306, <span class="stringliteral">"username"</span>, <span class="stringliteral">"password"</span>, <span class="stringliteral">"some_db_name"</span>))
{
        mess += <span class="stringliteral">"OK"</span>;
} <span class="keywordflow">else</span> mess += mysql.GetLastErrorMessage();
</pre></div><p>
As you can see above, connecting to MySQL server is very simple. You just have to specify server's hostname, port number, username, password and database name to connect to.<h2><a class="anchor" name="queries">
Executing queries</a></h2>
After your connection to MySQL server has been established, you are able to execute queries<p>
<div class="fragment"><pre class="fragment">...
wxMySQL mysql;
...
<span class="comment">// Array for storing results</span>
wxArrayString array;
wxString query = <span class="stringliteral">"SELECT * FROM testtable"</span>;
<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<span class="comment">// Executing query</span>
<span class="keywordflow">if</span>(mysql.Execute(query, &amp;result))
{
        <span class="comment">//If everything is OK then retrieve result row-by-row</span>
        <span class="keywordflow">while</span>(result.Fetch(array))
        {                       
                <span class="keywordflow">for</span>(i = 0; i &lt; array.Count(); i++)
                {
                        <span class="comment">// process results here</span>
                }
        }
} 
</pre></div><h2><a class="anchor" name="enumdatabases">
Enumerating database names</a></h2>
So, we have sucessfully connected to MySQL (see <a class="el" href="index.html#basics">Connecting to MySQL server</a>) and now we need to enumerate all avaliable databases. <a class="el" href="classwx_my_s_q_l.html">wxMySQL</a> has EnumDatabases function which allows to retrieve all database names to wxArrayString:<p>
<div class="fragment"><pre class="fragment">...
wxMySQL mysql;
...
wxTextCtrl * m_LOGTextCtrl;
...
<span class="comment">// Array for storing results</span>
wxArrayString array;
wxString mess = <span class="stringliteral">"\r\nList databases... "</span>;       
<span class="comment">// Enumerate databases</span>
<span class="keywordflow">if</span>(mysql.EnumDatabases(array))
{
        <span class="comment">// If everything is OK then...</span>
        mess += <span class="stringliteral">"OK"</span>;
        m_LOGTextCtrl-&gt;AppendText(mess);
        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; array.Count(); i++)
        {
                <span class="comment">// Display results</span>
                m_LOGTextCtrl-&gt;AppendText(wxString(<span class="stringliteral">"\r\n\t"</span>)+array[i]);
        }
} 
<span class="keywordflow">else</span> 
{
        <span class="comment">// If error occured then display error message</span>
        mess += mysql.GetLastErrorMessage();
        m_LOGTextCtrl-&gt;AppendText(mess);
}       
</pre></div><h2><a class="anchor" name="enumtables">
Enumerating table names</a></h2>
You should use wxMySQL::EnumTables in case if you want to retrieve the names of all tables in database:<p>
<div class="fragment"><pre class="fragment">...
wxMySQL mysql;
...
wxTextCtrl * m_LOGTextCtrl;
...
<span class="comment">// Array for storing results</span>
wxArrayString array;
wxString mess = <span class="stringliteral">"\r\nList tables... "</span>;  
<span class="comment">// Enumerate tables</span>
<span class="keywordflow">if</span>(mysql.EnumTables(array))
{
        <span class="comment">// If everything is OK then...</span>
        mess += <span class="stringliteral">"OK"</span>;
        m_LOGTextCtrl-&gt;AppendText(mess);
        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; array.Count(); i++)
        {
                <span class="comment">// Display results</span>
                m_LOGTextCtrl-&gt;AppendText(wxString(<span class="stringliteral">"\r\n\t"</span>)+array[i]);
        }
} 
<span class="keywordflow">else</span> 
{
        <span class="comment">// If error occured then display error message</span>
        mess += mysql.GetLastErrorMessage();
        m_LOGTextCtrl-&gt;AppendText(mess);
}
</pre></div><h2><a class="anchor" name="createdatabase">
Creating new database and new table</a></h2>
<div class="fragment"><pre class="fragment">...
wxMySQL mysql;
...
wxTextCtrl * m_LOGTextCtrl;
...
wxString mess = <span class="stringliteral">"\r\nCreating test database... "</span>;
<span class="comment">// Create new database 'testdatabase'</span>
<span class="keywordflow">if</span>(!mysql.CreateDatabase(<span class="stringliteral">"testdatabase"</span>))
{
        <span class="comment">// If error occured then display error message and exit</span>
        mess += mysql.GetLastErrorMessage();
        m_LOGTextCtrl-&gt;AppendText(mess);
        <span class="keywordflow">return</span>;
}
<span class="comment">// Open new database</span>
<span class="keywordflow">if</span>(!mysql.OpenDatabase(<span class="stringliteral">"testdatabase"</span>))
{
        <span class="comment">// If error occured then display error message and exit</span>
        mess += mysql.GetLastErrorMessage();
        m_LOGTextCtrl-&gt;AppendText(mess);
        <span class="keywordflow">return</span>;
}
<span class="comment">// Create new table with 3 fields (ID, test_field, name)</span>
<span class="keywordflow">if</span>(!mysql.Execute(<span class="stringliteral">"CREATE TABLE testtable (ID INTEGER NOT NULL, test_field INTEGER, name VARCHAR(12) NOT NULL)"</span>))
{
        <span class="comment">// If error occured then display error message and exit</span>
        mess += mysql.GetLastErrorMessage();
        m_LOGTextCtrl-&gt;AppendText(mess);
        <span class="keywordflow">return</span>;
}
<span class="comment">// Add 6 records to new table</span>
<span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; 6; i++)
{
        <span class="keywordflow">if</span>(!mysql.Execute(wxString::Format(<span class="stringliteral">"INSERT INTO testtable (ID, test_field, name) VALUES (%i, %i, \'Name_%i\')"</span>,i,i,i)))
        {
                <span class="comment">// If error occured then display error message and exit</span>
                mess += mysql.GetLastErrorMessage();
                m_LOGTextCtrl-&gt;AppendText(mess);
                <span class="keywordflow">return</span>;
        }
}
mess += <span class="stringliteral">"OK"</span>;
m_LOGTextCtrl-&gt;AppendText(mess);
</pre></div><h2><a class="anchor" name="fieldinfo">
Retrieving information about table fields</a></h2>
<div class="fragment"><pre class="fragment">...
wxMySQL mysql;
...
wxTextCtrl * m_LOGTextCtrl;
...
wxMySQLResult result;
...
<span class="comment">// Array of fields</span>
wxMySQLFieldArray array;
wxString mess = <span class="stringliteral">"\r\nFields info... "</span>;
<span class="comment">// Retrieve information about fields</span>
<span class="keywordflow">if</span>(!result.GetFieldsInfo(array))
{
        <span class="comment">// If error occured then display error message and exit</span>
        mess += mysql.GetLastErrorMessage();
        m_LOGTextCtrl-&gt;AppendText(mess);
        <span class="keywordflow">return</span>;
}
wxString value;
mess += <span class="stringliteral">"OK"</span>;
m_LOGTextCtrl-&gt;AppendText(mess);
<span class="comment">// Display information about fields</span>
<span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; array.Count(); i++)
{               
        value = wxString::Format(<span class="stringliteral">"\r\n\r\n- - - - - - - - Field %u - - - - - - - \r\n"</span>, i);
        m_LOGTextCtrl-&gt;AppendText(value);       
        value = wxString::Format(<span class="stringliteral">"\r\nName = %s"</span>, array[i].m_Name);
        m_LOGTextCtrl-&gt;AppendText(value);       
        value = wxString::Format(<span class="stringliteral">"\r\nOriginal Name = %s"</span>, array[i].m_NameOrg);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nTable Name = %s"</span>, array[i].m_TableName);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nOriginal Table Name = %s"</span>, array[i].m_TableNameOrg);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nDatabase Name = %s"</span>, array[i].m_DBName);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nCatalog Name = %s"</span>, array[i].m_DBCatalog);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nDefault value = %s"</span>, array[i].m_DefaultValue);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nLength = %u"</span>, array[i].m_Length);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nMaxLength = %u"</span>, array[i].m_MaxLength);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nDecimals = %u"</span>, array[i].m_Decimals);
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nField type = %s"</span>, wxMySQLGetFieldTypeName(array[i].m_FieldType));
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsNotNULL = %u"</span>, array[i].IsNotNULL());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsPrimaryKeyField = %u"</span>, array[i].IsPrimaryKeyField());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsUniqueKeyField = %u"</span>, array[i].IsUniqueKeyField());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsNonUniqueKeyField = %u"</span>, array[i].IsNonUniqueKeyField());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsUnSigned = %u"</span>, array[i].IsUnSigned());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsZeroFill = %u"</span>, array[i].IsZeroFill());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsBinary = %u"</span>, array[i].IsBinary());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsAutoIncrement = %u"</span>, array[i].IsAutoIncrement());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsEnum = %u"</span>, array[i].IsEnum());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsSet = %u"</span>, array[i].IsSet());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsBLOB = %u"</span>, array[i].IsBLOB());
        m_LOGTextCtrl-&gt;AppendText(value);
        value = wxString::Format(<span class="stringliteral">"\r\nIsTimeStamp = %u"</span>, array[i].IsTimeStamp());
        m_LOGTextCtrl-&gt;AppendText(value);
}
</pre></div><h2><a class="anchor" name="license">
License</a></h2>
<a class="el" href="classwx_my_s_q_l.html">wxMySQL</a> is free for commercial and non-commercial use and are distributed under wxWidgets license. Feel free to modify its source code.<h2><a class="anchor" name="developers">
Developers</a></h2>
You can contact <a href="&#109;&#97;i&#108;&#84;o&#58;t-rex&#64;mail&#46;zp&#46;ua">Volodymir (T-Rex) Tryapichko</a> in case if you have any questions about <a class="el" href="classwx_my_s_q_l.html">wxMySQL</a>.<h2><a class="anchor" name="links">
wxMySQL homepage and other links</a></h2>
Visit <a href="http://www.ttanalytics.nm.ru/wxcomponents/wxMySQL/index.html">project's homepage</a> to get more info and latest source<br>
 You can download the latest version of <a class="el" href="classwx_my_s_q_l.html">wxMySQL</a> <a href="http://www.ttanalytics.nm.ru/downloads.html">here</a><br>
 <hr size="1"><address style="align: right;"><small>Generated on Sun Oct 23 01:41:50 2005 for wxMySQL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.3 </small></address>
</body>
</html>
